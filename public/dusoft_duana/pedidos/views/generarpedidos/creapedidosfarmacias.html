<div flow-init="{target: '/pedidoFarmaciaArchivoPlano'}" flow-file-added="!!{txt:1,csv:1}[$file.getExtension()]">
<div style ="padding:5px" ng-controller="CreaPedidoFarmaciaController">    

    <div class="row marginBottom5"> <!--Div Row Superior-->
        
        <div class="col-sm-12 col-md-12 marginBottom5">

                <div class="panel panel-default marginBottom0 paddingBottomZero"> <!--Div Panel Principal Superior-->
                    
                    <div class="panel-heading">
                        <h4 class="h4MarginTopBottom">Información General</h4></br>
                        <!--<div class="col-sm-12 col-md-6 col-lg-6 pull-left">-->
                            <!--<alert ng-show="rootCreaPedidoFarmacia.no_modificar_valor_cantidad == true" type="danger">La Nueva Cantidad debe ser Menor a la Actual</alert>-->
                        <!--</div>-->
                    </div>
                    <!--<alert ng-show="rootCreaPedidoFarmacia.no_modificar_valor_cantidad == true" type="danger">La Nueva Cantidad debe ser Menor a la Actual</alert>-->
                    <div class="panel-body marginBottom0 paddingBottomZero marginRightZero"> <!--Div Panel Body-->
                        
                        <div class="row col-sm-12 col-md-12 marginBottom0 paddingBottomZero paddingRightZero"> <!--Div Contenedor Principal-->
                            
                            <div class="col-sm-12 col-md-6 paddingRightZero paddingLeftZero marginBottom0 paddingBottomZero"> <!--Div Contenedor Izquierdo-->

                                <div class="panel panel-default marginBottom0 col-sm-12 col-md-12 paddingBottomtZero"> <!--Div Encabezado-->
                                    <h4><b><i>De</i></b></h4>
                                </div> <!--/Div Encabezado-->
                                
                                <div class="panel panel-default marginTop0 col-sm-12 col-md-12 paddingTopZero marginBottom0 paddingBottomZero" style ="height:230px;"> <!--Div Cuerpo-->
                                    <div class="row">
                                        <div class="col-md-6">
                                            </br>
                                            <h4 class="h4MarginTopBottom">Empresa: </h4>

                                            <select ui-select2="deseleccionempresa"  class="form-control selectgeneral pull-left" ng-disabled="rootCreaPedidoFarmacia.bloqueo_producto_incluido" ng-model="rootCreaPedidoFarmacia.de_seleccion_empresa"  placeholder="Seleccionar Empresa" ng-change="valorSeleccionado()">
                                                <option></option>
                                                <option ng-repeat="empresa in  rootCreaPedidoFarmacia.de_lista_empresas"  ng-value="empresa.empresa_id" >{{empresa.razon_social}}</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col-md-6">
                                            </br>
                                            <h4 class="h4MarginTopBottom">Centro Utilidad: </h4>

                                            <select ui-select2="deseleccioncentroutilidad"  class="form-control selectgeneral pull-left" ng-disabled="rootCreaPedidoFarmacia.bloqueo_producto_incluido || rootCreaPedidoFarmacia.bloqueo_centro_utilidad_de" ng-model="rootCreaPedidoFarmacia.de_seleccion_centro_utilidad"  placeholder="Seleccionar Centro" ng-change="valorSeleccionado()">
                                                <option></option>
                                                <option ng-repeat="centro_utilidad in  rootCreaPedidoFarmacia.de_lista_centro_utilidad"  ng-value="centro_utilidad.centro_utilidad_id" >{{centro_utilidad.descripcion}}</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col-md-6">
                                            </br>
                                            <h4 class="h4MarginTopBottom">Bodega: </h4>

                                            <select ui-select2="deseleccionbodega"  class="form-control selectgeneral pull-left" ng-disabled="rootCreaPedidoFarmacia.bloqueo_producto_incluido || rootCreaPedidoFarmacia.bloqueo_bodega_de" ng-model="rootCreaPedidoFarmacia.de_seleccion_bodega"  placeholder="Seleccionar Bodega" ng-change="valorSeleccionado()">
                                                <option></option>
                                                <option ng-repeat="bodega in  rootCreaPedidoFarmacia.de_lista_bodegas"  ng-value="bodega.bodega_id" >{{bodega.descripcion}}</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                </div> <!--/Div Cuerpo-->
                            
                            </div> <!--/Div Contenedor Izquierdo-->
                            
                            <div class="col-sm-12 col-md-6 paddingLeftZero paddingRightZero marginBottom0 paddingBottomZero"> <!--/Div Contenedor Derecho-->
                                
                                <div class="panel panel-default marginBottom0 col-sm-12 col-md-12 paddingBottomZero"> <!--Div Encabezado-->

                                    <div class="pull-left col-sm-12 col-md-6"> <!--Div Izquierdo-->
                                        <h4><b><i>Para</i></b></h4>
                                    </div> <!--/Div Izquierdo-->

                                    <div class="pull-right col-sm-12 col-md-6"> <!--Div Derecho-->
                                        <h3 class="h4MarginTopBottom"><font color="blue">Pedido N°: {{rootCreaPedidoFarmacia.pedido.numero_pedido}}</font></h3>
                                    </div> <!--/Div Derecho-->

                                </div> <!--/Div Encabezado-->
                                
                                <div class="panel panel-default marginTop0 col-sm-12 col-md-12 paddingTopZero marginBottom0 paddingBottomZero" style ="height:230px;"> <!--Div Cuerpo-->
                                    
                                    <div class="row">
                                        <div class="col-md-6">
                                            </br>
                                            <h4 class="h4MarginTopBottom">Farmacia: </h4>

                                            <select ui-select2="paraseleccionempresa"  class="form-control selectgeneral pull-left" ng-disabled="rootCreaPedidoFarmacia.bloqueo_producto_incluido" ng-model="rootCreaPedidoFarmacia.para_seleccion_empresa"  placeholder="Seleccionar Farmacia" ng-change="valorSeleccionado()">
                                                <option></option>
                                                <option ng-repeat="empresa in  rootCreaPedidoFarmacia.para_lista_empresas"  ng-value="[empresa.empresa_id, empresa.nombre_empresa]" >{{empresa.nombre_empresa}}</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col-md-6">
                                            </br>
                                            <h4 class="h4MarginTopBottom">Centro Utilidad: </h4>

                                            <select ui-select2="paraseleccioncentroutilidad"  class="form-control selectgeneral pull-left" ng-disabled="rootCreaPedidoFarmacia.bloqueo_producto_incluido || rootCreaPedidoFarmacia.bloqueo_centro_utilidad_para" ng-model="rootCreaPedidoFarmacia.para_seleccion_centro_utilidad"  placeholder="Seleccionar Centro" ng-change="valorSeleccionado()">
                                                <option></option>
                                                <option ng-repeat="centro_utilidad in rootCreaPedidoFarmacia.para_lista_centro_utilidad"  ng-value="[centro_utilidad.centro_utilidad_id, centro_utilidad.nombre_centro_utilidad]" >{{centro_utilidad.nombre_centro_utilidad}}</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col-md-6">
                                            </br>
                                            <h4 class="h4MarginTopBottom">Bodega: </h4>

                                            <select ui-select2="paraseleccionbodega"  class="form-control selectgeneral pull-left" ng-disabled="rootCreaPedidoFarmacia.bloqueo_producto_incluido || rootCreaPedidoFarmacia.bloqueo_bodega_para" ng-model="rootCreaPedidoFarmacia.para_seleccion_bodega"  placeholder="Seleccionar Bodega" ng-change="valorSeleccionado()">
                                                <option></option>
                                                <option ng-repeat="bodega in  rootCreaPedidoFarmacia.para_lista_bodegas"  ng-value="[bodega.bodega_id, bodega.nombre_bodega]" >{{bodega.nombre_bodega}}</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                </div> <!--/Div Cuerpo-->
                                
                            </div> <!--/Div Contenedor Derecho-->
                            
                            <div class="panel panel-default marginTop0 paddingTopZero paddingBottomZero marginBottom0 col-sm-12 col-md-12 col-lg-12" style ="height:135px;"> <!--Div Contenedor Inferior-->
                                </br>
                                <h4 class="h4MarginTopBottom">Observación:</h4></br>
                                <textarea  class="col-lg-12 col-md-12 col-sm-12" rows="4" name="" ng-model="rootCreaPedidoFarmacia.observacion" placeholder="Ingresar Observación"></textarea>

                            </div> <!--/Div Contenedor Inferior-->

                        </div> <!--/Div Contenedor Principal-->

                    </div>  <!--/Div Panel Body-->
                    
                </div> <!--/Div Panel Principal Superior-->
                
        </div>
        
    </div> <!--/Div Row Superior-->
      
    <!-- End Código desplazado -->
    <div class="row">
        <div class="col-xs-12">
          
            <!--<div class="panel panel-default marginBottom5" ng-init="activeTab = true">-->

<!--                <div class="panel-heading">
                  <h4 class="h4MarginTopBottom">Productos</h4>
                </div>
                -->
                <div>
                    <br/><!--Espacio entre Tab Y título de Panel-->
                </div>
                
                <tabset> <!--Grupo de Tabs-->
                    
                    <tab disabled="rootCreaPedidoFarmacia.bloquear_tab" active="rootCreaPedidoFarmacia.tab_estados.tab1">
                        
                        <tab-heading>
                            <b> {{rootCreaPedidoFarmacia.titulo_tab_1}} </b>
                        </tab-heading>
                        
                        <!--<button class="btn" ng-click="data.static2 = true">Select Static2 {{data.static2}}</button>-->
                        
                        <!--<div class="panel-body">-->
                            
                            <div class="input-group navbar-form ">
                                <div ng-if="rootCreaPedidoFarmacia.grid_pedido_generado_visible === false">
                                    <button type="button" class="btn btn-default btn-medium ng-scope" ng-disabled="rootCreaPedidoFarmacia.bloquear_boton_incluir" ng-click="onRowClickSelectProducto(2)">
                                        <span class="glyphicon glyphicon-plus"></span> Incluir Producto
                                    </button>
                                </div>
                            
<!--                                <input type="text" class="form-control pull-right" ng-disabled="rootCreaPedidoFarmacia.bloquear" ng-keypress="onKeyDetalleDocumentoTemporalPress($event, termino_busqueda)" ng-model="rootCreaPedidoFarmacia.termino_busqueda" placeholder="Buscar Producto" name="srch-term" id="srch-term">
                                <div class="input-group-btn" >
                                    <button class="btn btn-default pull-right" type="submit" ng-disabled="rootCreaPedidoFarmacia.bloquear" ng-click="buscarDetalleDocumentoTemporal(termino_busqueda)"><i class="glyphicon glyphicon-search"></i></button>
                                </div>-->
                                
                            </div>
                        <!--</div>-->
                        <!--<div class="panel-body">-->
                            <div ng-if="rootCreaPedidoFarmacia.grid_pedido_generado_visible === false">
                                <div class="auditadosGrid" ng-grid="rootCreaPedidoFarmacia.lista_productos"></div>
                            </div>
                            <div ng-if="rootCreaPedidoFarmacia.grid_pedido_generado_visible === true">
                                <div class="auditadosGrid" ng-grid="rootCreaPedidoFarmacia.detalle_pedido_generado"></div>
                            </div>
                        <!--</div>-->
                        
                    </tab>
                    
                    <!--<div ng-if="rootCreaPedidoFarmacia.grid_pedido_generado_visible === false">-->
                        <tab disabled="rootCreaPedidoFarmacia.bloqueo_upload" active="rootCreaPedidoFarmacia.tab_estados.tab2">
                            <tab-heading>
                                <b> {{rootCreaPedidoFarmacia.titulo_tab_2}} </b>
                            </tab-heading>

                            <!--<button class="btn" ng-click="data.static1 = true">Select Static1 {{data.static1}}</button>-->

                            <div> <!-- flow-init flow-object="existingFlowObject" -->


                                <br/>

                                <div flow-prevent-drop flow-drag-enter="style={border: '5px solid green'}" flow-drag-leave="style={}" ng-style="dropEnabled && style">

                                    <div class="span6">

                                    </div>

                                    <div class="alert" ng-hide="$flow.files.length" flow-drop flow-drag-enter="class='alert alert-success'" flow-drag-leave="class='alert'" ng-class="class" style="text-align: center; padding: 50px 0;">
                                        <img src="../../../images/Cloud-Upload-Blue.png" style="max-width: 200px; max-height: 150px; line-height: 20px; margin-bottom: 5px;"/>
                                        <br/><br/>
                                        Arrastre y suelte el archivo en ésta área o use el botón ...</br></br>
                                        <button class="btn btn-info" ng-disabled="bloqueo_upload" flow-btn><i class="icon icon-file"></i>Buscar Archivo</button>
                                    </div>

                                    <div class="alert" ng-show="$flow.files.length" flow-drop flow-drag-enter="class='alert alert-success'" flow-drag-leave="class='alert'" ng-class="class" style="text-align: center; padding: 50px 0;">
                                        El archivo a cargar es: {{$flow.files[0].name}}</br></br>
                                        <img src="../../../images/txt-icon.png" style="max-width: 200px; max-height: 150px; line-height: 20px; margin-bottom: 5px;"/>
                                        <br/><br/>
                                        <button class="btn btn-small btn-success" ng-show="$flow.files.length" ng-click="$flow.resume(); setTabActivo(1)">Subir Archivo</button>
                                        <button class="btn btn-danger" ng-show="$flow.files.length" ng-click="$flow.cancel()">Eliminar</button>
                                    </div>

                                </div>

                            </div>
                        </tab>
                    <!--</div>-->
                    
                </tabset>
            <!--</div>-->
              
        </div>    
    </div>
    
    <div class="col-sm-12 btn-toolbar">
        <button type="submit" ng-disabled="rootCreaPedidoFarmacia.bloqueo_generar_pedido" class="btn btn-accion btn-success pull-right" ng-click="generarPedidoFarmacia()" ng-show="rootCreaPedidoFarmacia.grid_pedido_generado_visible === false">Generar Pedido</button>
        <button type="submit" ng-disabled="rootCreaPedidoFarmacia.bloqueo_generar_pedido" class="btn btn-accion btn-primary pull-right" ng-click="abrirViewVerPedidosFarmacias()" ng-show="rootCreaPedidoFarmacia.grid_pedido_generado_visible === false">Guardar Temporal</button>
        <button type="submit" class="btn btn-accion btn-warning pull-right" ng-click="abrirViewVerPedidosFarmaciasEliminarTemporal()" ng-show="rootCreaPedidoFarmacia.grid_pedido_generado_visible === false">Cancelar Pedido</button>
        <button type="submit" class="btn btn-accion btn-success pull-right" ng-click="abrirViewVerPedidosFarmacias()" ng-show="rootCreaPedidoFarmacia.grid_pedido_generado_visible === true">Finalizar</button>
    </div>

    <br/><br/><br/><br/><br/>
    
    <div slide-content open-callback="mostrarseleccionproducto" close-callback="cerrarseleccionproducto"  class="slide" >
        <div ng-include src="slideurl"  ng-controller="SeleccionProductoFarmaciaController" ></div>
    </div>

</div>

</div>